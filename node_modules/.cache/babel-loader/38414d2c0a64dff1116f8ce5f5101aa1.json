{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jshub/allied-banking-system-frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jshub/allied-banking-system-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/jshub/allied-banking-system-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/jshub/allied-banking-system-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/jshub/allied-banking-system-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Axios from\"axios\";import{Link,useParams,useHistory}from\"react-router-dom\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(){var history=useHistory();var _useState=useState({name:\"\",email:\"\",balance:\"\",mobile:\"\",city:\"\"}),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),accountsList=_useState4[0],setAccountsList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),senderList=_useState6[0],setSenderList=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),receiverList=_useState8[0],setReceiverList=_useState8[1];var _useState9=useState({amountExchange:\"\",to:\"\"}),_useState10=_slicedToArray(_useState9,2),transactionDetails=_useState10[0],setTransactionDetails=_useState10[1];var to=transactionDetails.to,amountExchange=transactionDetails.amountExchange;var onInputChange=function onInputChange(e){setTransactionDetails(_objectSpread(_objectSpread({},transactionDetails),{},_defineProperty({},e.target.name,e.target.value)));};var _useParams=useParams(),accountId=_useParams.accountId;var from=\"\".concat(account.name);useEffect(function(){loadAccount();},[]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){loadAccounts();},[]);// eslint-disable-line react-hooks/exhaustive-deps\nvar loadAccount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"https://allied-banking-system.herokuapp.com/accounts/\".concat(accountId));case 2:result=_context.sent;setAccount(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function loadAccount(){return _ref.apply(this,arguments);};}();var loadAccounts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get(\"https://allied-banking-system.herokuapp.com/accounts\");case 2:result=_context2.sent;setAccountsList(result.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function loadAccounts(){return _ref2.apply(this,arguments);};}();var sentMoney=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Axios.get(\"https://allied-banking-system.herokuapp.com/transactions/from/\".concat(account.name));case 2:result=_context3.sent;setSenderList(result.data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function sentMoney(){return _ref3.apply(this,arguments);};}();var receivedMoney=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Axios.get(\"https://allied-banking-system.herokuapp.com/transactions/to/\".concat(account.name));case 2:result=_context4.sent;setReceiverList(result.data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function receivedMoney(){return _ref4.apply(this,arguments);};}();var _onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();_context5.next=3;return Axios.post(\"https://allied-banking-system.herokuapp.com/transactions\",{from:from,to:to,amountExchange:amountExchange});case 3:history.push(\"/transactions\");case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function onSubmit(_x){return _ref5.apply(this,arguments);};}();useEffect(function(){sentMoney();},[account.name]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){receivedMoney();},[account.name]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Link,{className:\"btn-primary btn\",to:\"/accounts\",children:\"Back\"}),/*#__PURE__*/_jsx(\"hr\",{}),\".\",/*#__PURE__*/_jsxs(\"h1\",{className:\"display-4\",children:[\"Account No: \",accountId]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-bordered table-striped bg-warning w-50 font-weight-normal \",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:account.name})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:account.email})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[\"Balance( \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"rupee-sign\"}),\")\"]}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:account.balance})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:account.mobile})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:account.city})]})]},account._id)})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"display-4\",children:\"Transaction History\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-light container shadow-lg mt-5\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark bg-success\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Sender\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Receiver\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date and Time\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Transaction ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Debit/Credit\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[senderList.map(function(value,key){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:value.from}),/*#__PURE__*/_jsx(\"td\",{children:value.to}),/*#__PURE__*/_jsx(\"td\",{children:value.amountExchange}),/*#__PURE__*/_jsxs(\"td\",{children:[value.day,\"/\",value.month,\"/\",value.year,\" \\xA0\\xA0\\xA0\",value.hour,\":\",value.minute]}),/*#__PURE__*/_jsx(\"td\",{children:value._id}),/*#__PURE__*/_jsx(\"td\",{children:\"Debit\"})]},value._id);}),receiverList.map(function(value,key){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:value.from}),/*#__PURE__*/_jsx(\"td\",{children:value.to}),/*#__PURE__*/_jsx(\"td\",{children:value.amountExchange}),/*#__PURE__*/_jsxs(\"td\",{children:[value.day,\"/\",value.month,\"/\",value.year,\" \\xA0\\xA0\\xA0\",value.hour,\":\",value.minute]}),/*#__PURE__*/_jsx(\"td\",{children:value._id}),/*#__PURE__*/_jsx(\"td\",{children:\"Credit\"})]},key);})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"display-4\",children:\"Transfer Money\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-group\",onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"from\",value:account.name,onChange:function onChange(e){return onInputChange(e);},readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"To\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control form-input-background\",id:\"toAccount\",required:true,name:\"to\",value:account.value,onChange:function onChange(e){return onInputChange(e);},children:[/*#__PURE__*/_jsx(\"option\",{defaultValue:true,isdisabled:\"true\",children:\"Select the receiver account\"}),accountsList.map(function(val){if(val.name!==account.name){return/*#__PURE__*/_jsx(\"option\",{value:val.name,children:val.name},val._id);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Enter Amount\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control form-input-background\",type:\"number\",name:\"amountExchange\",value:amountExchange,min:\"0\",max:account.balance,required:true,onChange:function onChange(e){return onInputChange(e);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",type:\"submit\",children:\"Send\"})})]})]});};export default Account;","map":{"version":3,"sources":["C:/Users/jshub/allied-banking-system-frontend/src/components/users/Account.js"],"names":["React","useState","useEffect","Axios","Link","useParams","useHistory","FontAwesomeIcon","Account","history","name","email","balance","mobile","city","account","setAccount","accountsList","setAccountsList","senderList","setSenderList","receiverList","setReceiverList","amountExchange","to","transactionDetails","setTransactionDetails","onInputChange","e","target","value","accountId","from","loadAccount","loadAccounts","get","result","data","sentMoney","receivedMoney","onSubmit","preventDefault","post","push","_id","map","key","day","month","year","hour","minute","val"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { Link, useParams, useHistory } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst Account = () => {\r\n  let history = useHistory();\r\n\r\n  const [account, setAccount] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    balance: \"\",\r\n    mobile: \"\",\r\n    city: \"\",\r\n  });\r\n\r\n  const [accountsList, setAccountsList] = useState([]);\r\n  const [senderList, setSenderList] = useState([]);\r\n  const [receiverList, setReceiverList] = useState([]);\r\n\r\n  const [transactionDetails, setTransactionDetails] = useState({\r\n    amountExchange: \"\",\r\n    to: \"\",\r\n  });\r\n\r\n  const { to, amountExchange } = transactionDetails;\r\n  const onInputChange = (e) => {\r\n    setTransactionDetails({\r\n      ...transactionDetails,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const { accountId } = useParams();\r\n  const from = `${account.name}`;\r\n\r\n  useEffect(() => {\r\n    loadAccount();\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    loadAccounts();\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const loadAccount = async () => {\r\n    const result = await Axios.get(\r\n      `https://allied-banking-system.herokuapp.com/accounts/${accountId}`\r\n    );\r\n    setAccount(result.data);\r\n  };\r\n\r\n  const loadAccounts = async () => {\r\n    const result = await Axios.get(`https://allied-banking-system.herokuapp.com/accounts`);\r\n    setAccountsList(result.data);\r\n  };\r\n\r\n  const sentMoney = async () => {\r\n    const result = await Axios.get(\r\n      `https://allied-banking-system.herokuapp.com/transactions/from/${account.name}`\r\n    );\r\n    setSenderList(result.data);\r\n  };\r\n\r\n  const receivedMoney = async () => {\r\n    const result = await Axios.get(\r\n      `https://allied-banking-system.herokuapp.com/transactions/to/${account.name}`\r\n    );\r\n    setReceiverList(result.data);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await Axios.post(\"https://allied-banking-system.herokuapp.com/transactions\", {\r\n      from: from,\r\n      to: to,\r\n      amountExchange: amountExchange,\r\n    });\r\n    history.push(\"/transactions\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    sentMoney();\r\n  }, [account.name]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    receivedMoney();\r\n  }, [account.name]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <div className=\"container py-4\">\r\n      <hr />\r\n      <hr />\r\n      <Link className=\"btn-primary btn\" to=\"/accounts\">\r\n        Back\r\n      </Link>\r\n      <hr />.<h1 className=\"display-4\">Account No: {accountId}</h1>\r\n      <div>\r\n        <table className=\"table table-bordered table-striped bg-warning w-50 font-weight-normal \">\r\n          <tbody key={account._id}>\r\n            <tr>\r\n              <th scope=\"col\">Name</th>\r\n              <th scope=\"row\">{account.name}</th>\r\n            </tr>\r\n            <tr>\r\n              <th scope=\"col\">Email</th>\r\n              <th scope=\"row\">{account.email}</th>\r\n            </tr>\r\n            <tr >\r\n              <th scope=\"col\">\r\n                Balance( <FontAwesomeIcon icon=\"rupee-sign\" />)\r\n              </th>\r\n              <th scope=\"row\">{account.balance}</th>\r\n            </tr>\r\n            <tr >\r\n              <th scope=\"col\">Mobile Number</th>\r\n              <th scope=\"row\">{account.mobile}</th>\r\n            </tr>\r\n            <tr >\r\n              <th scope=\"col\">City</th>\r\n              <th scope=\"row\">{account.city}</th>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <hr />\r\n      <hr />\r\n      <p className=\"display-4\">Transaction History</p>\r\n      <table className=\"table table-light container shadow-lg mt-5\">\r\n        <thead className=\"table-dark bg-success\">\r\n          <tr>\r\n            <th scope=\"col\">Sender</th>\r\n            <th scope=\"col\">Receiver</th>\r\n            <th scope=\"col\">Amount</th>\r\n            <th scope=\"col\">Date and Time</th>\r\n            <th scope=\"col\">Transaction ID</th>\r\n            <th scope=\"col\">Debit/Credit</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {senderList.map((value, key) => {\r\n            return (\r\n              <tr key={value._id}>\r\n                <td>{value.from}</td>\r\n                <td>{value.to}</td>\r\n                <td>{value.amountExchange}</td>\r\n                <td>\r\n                  {value.day}/{value.month}/{value.year} &nbsp;&nbsp;&nbsp;\r\n                  {value.hour}:{value.minute}\r\n                </td>\r\n                <td>{value._id}</td>\r\n                <td>Debit</td>\r\n              </tr>\r\n            );\r\n          })}\r\n          {receiverList.map((value, key) => {\r\n            return (\r\n              <tr key={key}>\r\n                <td>{value.from}</td>\r\n                <td>{value.to}</td>\r\n                <td>{value.amountExchange}</td>\r\n                <td>\r\n                  {value.day}/{value.month}/{value.year} &nbsp;&nbsp;&nbsp;\r\n                  {value.hour}:{value.minute}\r\n                </td>\r\n                <td>{value._id}</td>\r\n                <td>Credit</td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      <hr />\r\n      <hr />\r\n      <p className=\"display-4\">Transfer Money</p>\r\n      <form className=\"form-group\" onSubmit={(e) => onSubmit(e)}>\r\n        <div className=\"form-group\">\r\n          <label>From</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"from\"\r\n            value={account.name}\r\n            onChange={(e) => onInputChange(e)}\r\n            readOnly\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>To</label>\r\n          <select\r\n            className=\"form-control form-input-background\"\r\n            id=\"toAccount\"\r\n            required\r\n            name=\"to\"\r\n            value={account.value}\r\n            onChange={(e) => onInputChange(e)}\r\n          >\r\n            <option defaultValue isdisabled=\"true\">\r\n              Select the receiver account\r\n            </option>\r\n            {/* eslint-disable-next-line */}\r\n            {accountsList.map(function (val) {\r\n              if (val.name !== account.name) {\r\n                return <option key={val._id} value={val.name}>{val.name}</option>;\r\n              }\r\n            })}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Enter Amount</label>\r\n          <input\r\n            className=\"form-control form-input-background\"\r\n            type=\"number\"\r\n            name=\"amountExchange\"\r\n            value={amountExchange}\r\n            min=\"0\"\r\n            max={account.balance}\r\n            required\r\n            onChange={(e) => onInputChange(e)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"center\">\r\n          <button className=\"btn btn-danger\" type=\"submit\">\r\n            Send\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n"]},"metadata":{},"sourceType":"module"}